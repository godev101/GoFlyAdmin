import{m as b,u as S,n as O,_ as L}from"./index.4e7f69e1.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{d as Y,e as g,c as q,u as c,aS as I,aL as C,C as i,aE as d,aH as o,aI as u,aN as U,bi as T,aF as m,bW as w,bX as z,bN as R,b7 as $,b6 as _,bQ as H,bL as j,aV as G,bz as Q,bY as W,bR as X,bc as J}from"./arco.f2539126.js";import{B as K,u as Z}from"./index.d16c415d.js";import{u as x}from"./loading.0b400085.js";import{I as ee}from"./IconPicker.65a498b6.js";import{I as ue}from"./Icon.48da78a9.js";function ve(e){return b.get({url:"/business/bizrule/get_list",params:e},{errorMessageMode:"none"})}function oe(){return b.get({url:"/business/bizrule/get_parent"},{errorMessageMode:"none"})}function ae(e){return b.post({url:"/business/bizrule/save",params:e},{errorMessageMode:"message"})}function Be(e){return b.post({url:"/business/bizrule/upStatus",params:e},{errorMessageMode:"message"})}function Ce(e){return b.delete({url:"/business/bizrule/del",params:e},{errorMessageMode:"message"})}const te=Y({name:"AddBook",components:{BasicModal:K,IconPicker:ee,Icon:ue},emits:["success"],setup(e,{emit:a}){const{t:h}=S(),y=g(!1),V=g([]),E=g(),f={id:0,title:"",locale:"",orderNo:1,type:0,pid:0,icon:"",routePath:"",routeName:"",component:"",redirect:"",permission:"",isExt:0,keepalive:0,requiresAuth:0,hideInMenu:0,hideChildrenInMenu:0,activeMenu:0,noAffix:0},l=g(f),n=g(""),[p,{setModalProps:r,closeModal:M}]=Z(async s=>{var B;(B=E.value)==null||B.resetFields(),r({confirmLoading:!1});const D=await oe(),v=[{id:0,title:"\u4E00\u7EA7\u83DC\u5355",pid:0,locale:""}];D?V.value=v.concat(D):V.value=v,y.value=!!(s!=null&&s.isUpdate),c(y)?(n.value=s.record.component,l.value=O(s.record)):(n.value="",l.value=O(f))}),A=q(()=>c(y)?"\u7F16\u8F91\u7CFB\u7EDF\u83DC\u5355":"\u65B0\u589E\u7CFB\u7EDF\u83DC\u5355"),{loading:k,setLoading:F}=x();return{registerModal:p,getTitle:A,handleSubmit:async()=>{var s;try{await((s=E.value)==null?void 0:s.validate())||(F(!0),l.value.type==0&&l.value.component==""&&(l.value.component="LAYOUT"),l.value.type==0&&l.value.routePath&&l.value.routePath.substr(0,1)!="/"&&(l.value.routePath="/"+l.value.routePath),I.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus"}),await ae(c(l)),I.success({content:"\u66F4\u65B0\u6210\u529F",id:"upStatus"}),M(),a("success"),F(!1))}catch{F(!1),I.clear("top")}},formRef:E,loading:k,formData:l,parntList:V,t:h,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}],handleChangeType:s=>{s==0?l.value.component="LAYOUT":s==1?(l.value.component=n.value,l.value.redirect=""):s==2&&(l.value.component="",l.value.redirect="")}}}});function le(e,a,h,y,V,E){const f=z,l=R,n=$,p=_,r=H,M=j,A=G,k=C("Icon"),F=C("icon-apps"),P=C("IconPicker"),N=Q,s=W,D=X,v=J,B=C("BasicModal");return i(),d(B,w(e.$attrs,{onRegister:e.registerModal,loading:e.loading,helpMessage:"\u7F16\u8F91\u548C\u4FEE\u6539\u83DC\u5355",width:"800px",minHeight:420,title:e.getTitle,onOk:e.handleSubmit}),{default:o(()=>[u(v,{ref:"formRef",model:e.formData,"auto-label-width":""},{default:o(()=>[u(n,{field:"type",label:"\u83DC\u5355\u7C7B\u578B",style:{"margin-bottom":"15px"}},{default:o(()=>[u(l,{type:"button",modelValue:e.formData.type,"onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.type=t),onChange:e.handleChangeType},{default:o(()=>[u(f,{value:0},{default:o(()=>[U("\u76EE\u5F55")]),_:1}),u(f,{value:1},{default:o(()=>[U("\u83DC\u5355")]),_:1}),u(f,{value:2},{default:o(()=>[U("\u6309\u94AE")]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1}),u(D,{gutter:16},{default:o(()=>[u(r,{span:12},{default:o(()=>[u(n,{field:"title",label:"\u83DC\u5355\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u83DC\u5355\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:o(()=>[u(p,{modelValue:e.formData.title,"onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.title=t),placeholder:"\u8BF7\u586B\u5199\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),u(r,{span:12},{default:o(()=>[u(n,{field:"locale",label:"\u591A\u8BED\u8A00\u6807\u8BC6","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:o(()=>[u(p,{modelValue:e.formData.locale,"onUpdate:modelValue":a[2]||(a[2]=t=>e.formData.locale=t),placeholder:"\u8BF7\u586B\u5199\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),u(r,{span:12},{default:o(()=>[u(n,{label:"\u4E0A\u7EA7\u83DC\u5355",field:"pid",style:{"margin-bottom":"15px"}},{default:o(()=>[u(M,{placeholder:"\u9009\u62E9\u4E0A\u7EA7\u83DC\u5355",data:e.parntList,fieldNames:{key:"id",title:"title",children:"children"},modelValue:e.formData.pid,"onUpdate:modelValue":a[3]||(a[3]=t=>e.formData.pid=t)},null,8,["data","modelValue"])]),_:1})]),_:1}),u(r,{span:12},{default:o(()=>[u(n,{label:"\u6392\u5E8F",field:"orderNo",style:{"margin-bottom":"15px"}},{default:o(()=>[u(A,{modelValue:e.formData.orderNo,"onUpdate:modelValue":a[4]||(a[4]=t=>e.formData.orderNo=t),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1})]),_:1}),e.formData.type!=2?(i(),d(r,{key:0,span:12},{default:o(()=>[u(n,{label:"\u56FE\u6807",field:"icon",style:{"margin-bottom":"15px"}},{default:o(()=>[u(s,{modelValue:e.formData.icon,"onUpdate:modelValue":a[6]||(a[6]=t=>e.formData.icon=t),placeholder:"\u9009\u62E9\u56FE\u6807/\u586B\u5199","search-button":""},T({"button-icon":o(()=>[u(N,{position:"bl",trigger:"click"},{content:o(()=>[u(P,{onChange:a[5]||(a[5]=t=>{e.formData.icon=t})})]),default:o(()=>[u(F)]),_:1})]),_:2},[e.formData.icon?{name:"prefix",fn:o(()=>[u(k,{icon:e.formData.icon,size:23},null,8,["icon"])]),key:"0"}:void 0]),1032,["modelValue"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:1,span:12},{default:o(()=>[u(n,{field:"routePath",label:"\u8DEF\u7531\u5730\u5740","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u5730\u5740"}],style:{"margin-bottom":"15px"}},{default:o(()=>[u(p,{modelValue:e.formData.routePath,"onUpdate:modelValue":a[7]||(a[7]=t=>e.formData.routePath=t),placeholder:"\u8DEF\u7531\u5730\u5740\uFF08path\uFF09"},null,8,["modelValue"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:2,span:12},{default:o(()=>[u(n,{field:"routeName",label:"\u8DEF\u7531\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u8DEF\u7531\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:o(()=>[u(p,{modelValue:e.formData.routeName,"onUpdate:modelValue":a[8]||(a[8]=t=>e.formData.routeName=t),placeholder:"\u8DEF\u7531\u540D\u79F0\uFF08name\uFF09"},null,8,["modelValue"])]),_:1})]),_:1})):m("",!0),e.formData.type==0?(i(),d(r,{key:3,span:12},{default:o(()=>[u(n,{field:"redirect",label:"\u91CD\u5B9A\u5411\u5730\u5740","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u91CD\u5B9A\u5411\u5730\u5740"}]},{default:o(()=>[u(p,{modelValue:e.formData.redirect,"onUpdate:modelValue":a[9]||(a[9]=t=>e.formData.redirect=t),placeholder:"\u91CD\u5B9A\u5411\u5730\u5740\uFF08redirect\uFF09"},null,8,["modelValue"])]),_:1})]),_:1})):m("",!0),e.formData.type==1?(i(),d(r,{key:4,span:12},{default:o(()=>[u(n,{field:"component",label:"\u7EC4\u4EF6\u8DEF\u5F84","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u7EC4\u4EF6\u8DEF\u5F84"}]},{default:o(()=>[u(p,{modelValue:e.formData.component,"onUpdate:modelValue":a[10]||(a[10]=t=>e.formData.component=t),placeholder:"\u7EC4\u4EF6\u8DEF\u5F84\uFF08component\uFF09"},null,8,["modelValue"])]),_:1})]),_:1})):m("",!0),e.formData.type==2?(i(),d(r,{key:5,span:12},{default:o(()=>[u(n,{field:"permission",label:"\u6743\u9650\u6807\u8BC6","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u6743\u9650\u6807\u8BC6"}]},{default:o(()=>[u(p,{modelValue:e.formData.permission,"onUpdate:modelValue":a[11]||(a[11]=t=>e.formData.permission=t),placeholder:'\u6743\u9650\u6807\u8BC6 \uFF08v-permission="[admin]"\uFF09'},null,8,["modelValue"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:6,span:12},{default:o(()=>[u(n,{field:"isExt",label:"\u662F\u5426\u5916\u94FE",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.isExt,"onUpdate:modelValue":a[12]||(a[12]=t=>e.formData.isExt=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:7,span:12},{default:o(()=>[u(n,{field:"keepalive",label:"\u662F\u5426\u7F13\u5B58",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.keepalive,"onUpdate:modelValue":a[13]||(a[13]=t=>e.formData.keepalive=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:8,span:12},{default:o(()=>[u(n,{field:"hideInMenu",label:"\u5DE6\u4FA7\u83DC\u5355\u4E2D\u9690\u85CF",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.hideInMenu,"onUpdate:modelValue":a[14]||(a[14]=t=>e.formData.hideInMenu=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:9,span:12},{default:o(()=>[u(n,{field:"hideChildrenInMenu",label:"\u5DE6\u4FA7\u83DC\u5355\u4E2D\u663E\u793A",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.hideChildrenInMenu,"onUpdate:modelValue":a[15]||(a[15]=t=>e.formData.hideChildrenInMenu=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:10,span:12},{default:o(()=>[u(n,{field:"noAffix",label:"\u6DFB\u52A0\u5230\u6807\u7B7E\u4E2D",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.noAffix,"onUpdate:modelValue":a[16]||(a[16]=t=>e.formData.noAffix=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:11,span:12},{default:o(()=>[u(n,{field:"activeMenu",label:"\u9AD8\u4EAE\u8BBE\u7F6E\u7684\u83DC\u5355",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.activeMenu,"onUpdate:modelValue":a[17]||(a[17]=t=>e.formData.activeMenu=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0),e.formData.type!=2?(i(),d(r,{key:12,span:12},{default:o(()=>[u(n,{field:"requiresAuth",label:"\u662F\u5426\u9700\u8981\u767B\u5F55\u9274\u6743",style:{"margin-bottom":"5px"}},{default:o(()=>[u(l,{modelValue:e.formData.requiresAuth,"onUpdate:modelValue":a[18]||(a[18]=t=>e.formData.requiresAuth=t),options:e.OYoptions},null,8,["modelValue","options"])]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const ne=L(te,[["render",le]]),Me=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));export{ne as A,Me as a,Ce as d,ve as g,Be as u};
