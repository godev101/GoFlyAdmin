import{u as Ee,_ as Me}from"./index.4e7f69e1.js";/* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as z,d as ze,r as Te,e as c,o as Ae,w as Ie,aL as m,C as k,D as M,aI as e,u as i,aH as a,G as s,aO as v,aN as g,aK as Ve,aJ as Re,aE as Pe,E as Ue,aF as $e,bP as Le,n as j,aS as l,aR as Ne,aX as Oe,bb as Ye,c9 as je,bU as Ke,b6 as Ge,ca as He,c4 as Je,bQ as Qe,bv as We,bw as Xe,bx as qe,bR as Ze,aW as et,bS as tt,bT as at,bV as nt,b1 as ot,b2 as st}from"./arco.f2539126.js";import{u as lt}from"./loading.0b400085.js";import{A as ut,u as it,d as ct,g as rt}from"./AddForm.5788b0cc.js";import{A as dt,g as pt,d as mt}from"./AddMenu.ae93f25a.js";import{c as K}from"./cloneDeep.188a8ec5.js";import{a as G}from"./index.d16c415d.js";import{I as H}from"./Icon.48da78a9.js";import{h as _t}from"./vue.0c455acb.js";import"./chart.87fd2a0d.js";/* empty css               *//* empty css                */const vt=z(()=>[{title:"\u6392\u5E8F",dataIndex:"weigh",width:80,align:"center"},{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"keyname",align:"center"},{title:"\u5B57\u5178\u9879\u503C",dataIndex:"keyvalue",align:"center"},{title:"\u5B57\u5178\u63CF\u8FF0",dataIndex:"des",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),T=b=>(ot("data-v-a3224bc4"),b=b(),st(),b),gt={class:"container"},ht={class:"flexbox"},ft={class:"menu"},bt={class:"btn"},yt=T(()=>s("span",{style:{"padding-left":"3px"}},"\u6DFB\u52A0",-1)),Ct=T(()=>s("span",{style:{"padding-left":"3px"}},"\u4FEE\u6539",-1)),xt=T(()=>s("span",{style:{"padding-left":"3px"}},"\u5220\u9664",-1)),kt={class:"tablebox"},wt={class:"titlebox"},Ft={class:"text"},Bt={class:"icon"},St={class:"content"},Dt={class:"action-icon"},Et={key:0,style:{"padding-left":"5px",color:"var(--color-neutral-4)"}},Mt=["src"],zt={name:"article"},Tt=ze({...zt,setup(b){const A=_t(),{t:y}=Ee(),[J,{openModal:I}]=G(),[Q,{openModal:W}]=G(),X=z(()=>[{name:y("searchTable.size.mini"),value:"mini"},{name:y("searchTable.size.small"),value:"small"},{name:y("searchTable.size.medium"),value:"medium"},{name:y("searchTable.size.large"),value:"large"}]),r=Te({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),{loading:q,setLoading:w}=lt(!0),F=c([]),h=c([]),C=c([]),Z=c([]),B=c("large"),V=()=>({trade_no:"",title:"",name:"",createdTime:[],status:""}),_=c(""),d=c(V()),p=async()=>{w(!0);try{const t=await rt({page:r.current,pageSize:r.pageSize,...d.value,tablename:_.value});F.value=t.items,r.current=t.page,r.total=t.total}catch{}finally{w(!1)}},S=async()=>{h.value=await pt({}),h.value&&h.value.length>0&&(u.value=[h.value[0].id],_.value=h.value[0].tablename,j(()=>{p()}))},ee=()=>{S()},D=c(),u=c([]),te=t=>{F.value=[],r.current=1,w(!0),u.value=[t.id],_.value=t.tablename,D.value=t,p()},R=t=>{t==2&&!D.value?l.error("\u672A\u9009\u62E9\u7F16\u8F91\u6570\u636E"):W(!0,{isUpdate:t==2,record:t==2?D:null})},ae=()=>{!u.value||u.value.length==0?l.error("\u672A\u9009\u62E9\u5220\u9664\u6570\u636E"):Ne.warning({title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5185\u5BB9\u5417\uFF1F",content:"\u5220\u9664\u540E\u5185\u5BB9\u5C06\u65E0\u6CD5\u6062\u590D\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",titleAlign:"start",hideCancel:!1,onOk:async()=>{l.loading({content:"\u5220\u9664\u4E2D",id:"upStatus",duration:0}),await mt({ids:u.value}),j(()=>{l.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus",duration:200}),S()})}})};Ae(()=>{S()});const P=()=>{p()},ne=()=>{d.value=V(),p()},oe=(t,o)=>{B.value=t};Ie(()=>vt.value,t=>{C.value=K(t),C.value.forEach((o,U)=>{o.checked=!0}),Z.value=K(C.value)},{deep:!0,immediate:!0});const se=()=>{!u.value||u.value.length==0?l.error("\u672A\u9009\u62E9\u5B57\u5178\u6570\u636E"):I(!0,{isUpdate:!1,tablename:_.value,table_id:u.value[0],record:null})},le=async t=>{I(!0,{isUpdate:!0,tablename:_.value,table_id:u.value[0],record:t})},ue=async()=>{p()},ie=t=>{r.current=t,p()},ce=t=>{r.pageSize=t,p()},re=async t=>{try{l.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus"}),await it({id:t.id,status:t.status,tablename:_.value})&&l.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus"})}catch{l.clear("top")}},de=async t=>{try{l.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await ct({ids:[t.id],tablename:_.value})&&(p(),l.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{l.clear("top")}},pe=z(()=>[{label:"\u5168\u90E8",value:""},{label:"\u6B63\u5E38",value:0},{label:"\u9690\u85CF",value:1}]);return(t,o)=>{const U=m("Breadcrumb"),$=m("icon-plus"),f=Oe,me=m("icon-edit"),_e=m("icon-delete"),E=Ye,L=je,ve=m("icon-right"),N=Ke,ge=Ge,he=He,fe=Je,be=m("icon-search"),O=Qe,ye=m("icon-refresh"),Y=We,Ce=m("icon-line-height"),xe=Xe,ke=qe,we=Ze,Fe=et,Be=tt,Se=at,De=nt;return k(),M("div",gt,[e(U,{items:[i(A).matched[0].meta.locale,i(A).meta.locale]},null,8,["items"]),e(De,{class:"general-card onelineCard",style:{height:"calc(100% - 50px)"}},{default:a(()=>[s("div",ht,[s("div",ft,[s("div",bt,[e(E,null,{default:a(()=>[e(f,{type:"primary",onClick:o[0]||(o[0]=n=>R(1))},{default:a(()=>[e($),yt]),_:1}),e(f,{type:"primary",status:"warning",onClick:o[1]||(o[1]=n=>R(2))},{default:a(()=>[e(me),Ct]),_:1}),e(f,{type:"primary",status:"danger",onClick:ae},{default:a(()=>[e(_e),xt]),_:1})]),_:1})]),s("div",kt,[e(N,{data:h.value,"row-key":"id",onRowClick:te,"selected-keys":u.value,scrollbar:!0,pagination:!1,bordered:{wrapper:!0,cell:!0},style:{"margin-top":"10px"}},{columns:a(()=>[e(L,{title:"",width:50,"data-index":"id"}),e(L,{title:"\u5B57\u5178\u540D\u79F0","data-index":"title"},{cell:a(({record:n})=>[s("div",wt,[s("div",Ft,v(n.title),1),s("div",Bt,[e(ve)])])]),_:1})]),_:1},8,["data","selected-keys"])])]),s("div",St,[e(we,{style:{"margin-bottom":"10px",padding:"0px 10px"}},{default:a(()=>[e(O,{span:16},{default:a(()=>[e(E,null,{default:a(()=>[e(ge,{style:{width:"160px"},modelValue:d.value.title,"onUpdate:modelValue":o[2]||(o[2]=n=>d.value.title=n),placeholder:"\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),e(he,{modelValue:d.value.createdTime,"onUpdate:modelValue":o[3]||(o[3]=n=>d.value.createdTime=n),style:{width:"230px"}},null,8,["modelValue"]),e(fe,{modelValue:d.value.status,"onUpdate:modelValue":o[4]||(o[4]=n=>d.value.status=n),options:i(pe),placeholder:"\u72B6\u6001",style:{width:"120px"}},null,8,["modelValue","options"]),e(f,{type:"primary",onClick:P},{icon:a(()=>[e(be)]),default:a(()=>[g(" \u67E5\u8BE2 ")]),_:1}),e(f,{onClick:ne},{default:a(()=>[g(v(t.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1}),e(O,{span:8,style:{"text-align":"right"}},{default:a(()=>[e(E,null,{default:a(()=>[e(f,{type:"primary",onClick:se},{icon:a(()=>[e($)]),default:a(()=>[g(" "+v(t.$t("searchTable.operation.create")),1)]),_:1}),e(Y,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[s("div",{class:"action-icon",onClick:P},[e(ye,{size:"18"})])]),_:1},8,["content"]),e(ke,{onSelect:oe},{content:a(()=>[(k(!0),M(Ve,null,Re(i(X),n=>(k(),Pe(xe,{key:n.value,value:n.value,class:Ue({active:n.value===B.value})},{default:a(()=>[s("span",null,v(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(Y,{content:t.$t("searchTable.actions.density")},{default:a(()=>[s("div",Dt,[e(Ce,{size:"18"})])]),_:1},8,["content"])]),_:1})]),_:1})]),_:1})]),_:1}),e(N,{"row-key":"id",loading:i(q),pagination:r,columns:C.value,data:F.value,bordered:{wrapper:!0,cell:!0},size:B.value,"default-expand-all-rows":!0,ref:"artable",onPageChange:ie,onPageSizeChange:ce},{name:a(({record:n})=>[g(v(n.name),1),n.nickname?(k(),M("span",Et,v(n.nickname),1)):$e("",!0)]),image:a(({record:n})=>[s("img",{alt:"\u5C01\u9762",style:{height:"50px","border-radius":"5px"},src:n.image},null,8,Mt)]),createtime:a(({record:n})=>[g(v(i(Le)(n.createtime*1e3).format("YYYY-MM-DD")),1)]),status:a(({record:n})=>[e(Fe,{type:"round",modelValue:n.status,"onUpdate:modelValue":x=>n.status=x,"checked-value":0,"unchecked-value":1,onChange:x=>re(n)},{checked:a(()=>[g(" \u5F00 ")]),unchecked:a(()=>[g(" \u5173 ")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:n})=>[e(i(H),{icon:"svgfont-bianji1",class:"iconbtn",onClick:x=>le(n),size:18,color:"#0960bd"},null,8,["onClick"]),e(Be,{direction:"vertical"}),e(Se,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:x=>de(n)},{default:a(()=>[e(i(H),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size"])])])]),_:1}),e(ut,{onRegister:i(J),onSuccess:ue},null,8,["onRegister"]),e(dt,{onRegister:i(Q),onSuccess:ee},null,8,["onRegister"])])}}});const pa=Me(Tt,[["__scopeId","data-v-a3224bc4"]]);export{pa as default};
