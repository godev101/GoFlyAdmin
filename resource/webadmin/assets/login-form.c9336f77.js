import{u as q,a as x,_ as M}from"./index.4e7f69e1.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as z,e as A,r as G,aL as S,C as E,D as H,G as m,aO as t,u as g,aN as _,aI as o,aH as r,aS as O,b6 as Q,b7 as R,b8 as U,b9 as X,ba as j,aX as J,bb as K,bc as W,b1 as Y,b2 as Z}from"./arco.f2539126.js";import{f as ee,g as oe}from"./vue.0c455acb.js";import{u as se}from"./loading.0b400085.js";import"./chart.87fd2a0d.js";const re=d=>(Y("data-v-105cd1df"),d=d(),Z(),d),ae={class:"login-form-wrapper"},te={class:"login-form-title"},ne={class:"login-form-sub-title"},le=re(()=>m("div",{style:{"font-size":"12px",color:"#1890ff"}},"\u6D4B\u8BD5\u8D26\u53F7\uFF1Agofly,\u5BC6\u7801\uFF1Agofly123",-1)),ie={class:"login-form-error-msg"},me={class:"login-form-password-actions"},de=z({__name:"login-form",emits:["reback"],setup(d,{emit:k}){const w=ee(),{t:C}=q(),v=A(""),{loading:h,setLoading:y}=se(),F=x(),I=window==null?void 0:window.globalConfig.loginTitle,P=window==null?void 0:window.globalConfig.loginSubTitle,a=oe("login-config",{rememberPassword:!0,username:"gofly",password:"gofly123"}),n=G({username:a.value.username,password:a.value.password}),V=async({errors:e,values:s})=>{if(!h.value&&!e){y(!0);try{await F.login(s);const{redirect:i,...u}=w.currentRoute.value.query;var l=i;l=="notFound"&&(l="home"),w.replace({name:l||"home",query:{...u}}),O.success({content:C("login.form.login.success"),id:"menuNotice"});const{rememberPassword:c}=a.value,{username:f,password:b}=s;a.value.username=c?f:"",a.value.password=c?b:""}catch(i){v.value=i.message}finally{y(!1)}}},$=e=>{a.value.rememberPassword=e},B=e=>{k("reback",e)};return(e,s)=>{const l=S("icon-user"),i=Q,u=R,c=S("icon-lock"),f=U,b=X,N=j,T=J,D=K,L=W;return E(),H("div",ae,[m("div",te,t(g(I)),1),m("div",ne,[_(t(g(P))+" ",1),le]),m("div",ie,t(v.value),1),o(L,{ref:"loginForm",model:n,class:"login-form",layout:"vertical",onSubmit:V},{default:r(()=>[o(u,{field:"username",rules:[{required:!0,message:e.$t("login.form.userName.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:r(()=>[o(i,{modelValue:n.username,"onUpdate:modelValue":s[0]||(s[0]=p=>n.username=p),placeholder:e.$t("login.form.userName.placeholder")},{prefix:r(()=>[o(l)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),o(u,{field:"password",rules:[{required:!0,message:e.$t("login.form.password.errMsg")}],"validate-trigger":["change","blur"],"hide-label":""},{default:r(()=>[o(f,{modelValue:n.password,"onUpdate:modelValue":s[1]||(s[1]=p=>n.password=p),placeholder:e.$t("login.form.password.placeholder"),"allow-clear":""},{prefix:r(()=>[o(c)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),o(D,{size:16,direction:"vertical"},{default:r(()=>[m("div",me,[o(b,{checked:"rememberPassword","model-value":g(a).rememberPassword,onChange:$},{default:r(()=>[_(t(e.$t("login.form.rememberPassword")),1)]),_:1},8,["model-value","onChange"]),o(N,{onClick:s[2]||(s[2]=p=>B("forget"))},{default:r(()=>[_(t(e.$t("login.form.forgetPassword")),1)]),_:1})]),o(T,{type:"primary","html-type":"submit",long:"",loading:g(h)},{default:r(()=>[_(t(e.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}});const ye=M(de,[["__scopeId","data-v-105cd1df"]]);export{ye as default};
