import{_ as w}from"./index.d9e4049f.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                */import{d as V,e as E,aL as h,C as F,D,aI as e,aH as s,G as n,aN as x,u as q,aS as A,aW as k,b7 as U,bS as N,c9 as P,aY as $,bc as z,br as L,b2 as R,b3 as T}from"./arco.9680cdc2.js";import{a as Z,b as W}from"./wxsetting.2a9c17fc.js";import{u as G}from"./loading.351b94a0.js";import{u as H}from"./common.766f2668.js";import"./chart.1da8855c.js";import"./vue.72f6b675.js";const K=i=>(R("data-v-8e91ee09"),i=i(),T(),i),M={class:"formbox"},Y={class:"subbox"},j={class:"upimagebox"},J={class:"imagebtn"},O={key:0,class:"upload-show-picture"},Q=["src"],X={class:"upload-show-picture-mask"},ee={key:1,class:"upload-picture-card"},ue={class:"upload-picture-card-text"},oe=K(()=>n("div",{style:{"margin-top":"10px","font-weight":"600"}},"\u4E0A\u4F20\u56FE\u7247",-1)),te={class:"sumbtn"},ae=V({__name:"wxApp",setup(i){const{loading:I,setLoading:d}=G(),v=E(),g={id:0,name:"",AppID:"",AppSecret:"",des:"",qrcode:"",Token:"",EncodingAESKey:""},u=E(g);(async()=>{d(!0);try{const t=await Z({});t?u.value=t:u.value=g}catch{}finally{d(!1)}})();const y=async t=>{if(console.log(`
errors:`,t.errors),!t.errors)try{d(!0),A.loading({content:"\u4FDD\u5B58\u4E2D",id:"upStatus"}),t.values.id=u.value.id,await W(t.values),A.success({content:"\u4FDD\u5B58\u6210\u529F",id:"upStatus"}),d(!1)}catch{d(!1),A.clear("top")}},C=t=>{const o=new AbortController;return async function(){const{onProgress:l,onError:_,onSuccess:b,fileItem:c}=t;l(20);const f=a=>{let p;a.total>0&&(p=a.loaded/a.total*100),l(parseInt(String(p),10),a)};try{const a=(c==null?void 0:c.name)||"",p=await H({name:"file",file:c.file,filename:a,data:{cid:0}},f);p&&(u.value.qrcode=p.url)}catch(a){_(a)}}(),{abort(){o.abort()}}};return(t,o)=>{const m=k,l=U,_=N,b=h("IconEdit"),c=h("IconPlus"),f=P,a=$,p=z,S=L;return F(),D("div",M,[e(S,{loading:q(I),tip:"\u52A0\u8F7D\u4E2D"},{default:s(()=>[n("div",Y,[e(p,{ref_key:"formRef",ref:v,model:u.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18},onSubmit:y},{default:s(()=>[e(l,{field:"name",label:"\u5C0F\u7A0B\u5E8F\u540D\u79F0",rules:[{required:!0,message:"\u5C0F\u7A0B\u5E8F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"},{match:/^[a-zA-Z0-9\u4e00-\u9fa5]{1,20}$/,message:"\u8F93\u5165\u6C49\u5B57\u3001\u5B57\u6BCD\u6216\u6570\u5B57\uFF0C\u6700\u591A20\u5B57\u7B26"}]},{default:s(()=>[e(m,{modelValue:u.value.name,"onUpdate:modelValue":o[0]||(o[0]=r=>u.value.name=r),placeholder:"\u586B\u5199\u5C0F\u7A0B\u5E8F\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(l,{field:"AppID",label:"\u5F00\u53D1\u8005ID",rules:[{required:!0,message:"\u5F00\u53D1\u8005ID\u4E0D\u80FD\u4E3A\u7A7A"},{match:/^[0-9A-Za-z]{6,38}$/,message:"\u8F93\u5165\u5B57\u6BCD\u6216\u6570\u5B57"}]},{default:s(()=>[e(m,{modelValue:u.value.AppID,"onUpdate:modelValue":o[1]||(o[1]=r=>u.value.AppID=r),placeholder:"\u586B\u5199\u5F00\u53D1\u8005ID\uFF08AppID\uFF09"},null,8,["modelValue"])]),_:1}),e(l,{field:"AppSecret",label:"\u5F00\u53D1\u8005\u79D8\u94A5",rules:[{required:!0,message:"\u5F00\u53D1\u8005\u79D8\u94A5\u4E0D\u80FD\u4E3A\u7A7A"},{match:/^[0-9A-Za-z]{6,50}$/,message:"\u8F93\u5165\u5B57\u6BCD\u6216\u6570\u5B57"}]},{default:s(()=>[e(m,{modelValue:u.value.AppSecret,"onUpdate:modelValue":o[2]||(o[2]=r=>u.value.AppSecret=r),placeholder:"\u586B\u5199\u5F00\u53D1\u8005\u79D8\u94A5\uFF08AppSecret\uFF09"},null,8,["modelValue"])]),_:1}),e(l,{field:"des",label:"\u5907\u6CE8"},{default:s(()=>[e(_,{modelValue:u.value.des,"onUpdate:modelValue":o[3]||(o[3]=r=>u.value.des=r),placeholder:"\u586B\u5199\u5907\u6CE8\uFF08\u9009\u586B\uFF09"},null,8,["modelValue"])]),_:1}),e(l,{field:"image",label:"\u4E8C\u7EF4\u7801"},{default:s(()=>[e(f,{accept:"image/*","show-file-list":!1,"custom-request":C},{"upload-button":s(()=>[n("div",j,[n("div",J,[u.value.qrcode?(F(),D("div",O,[n("img",{src:u.value.qrcode},null,8,Q),n("div",X,[e(b)])])):(F(),D("div",ee,[n("div",ue,[e(c),oe])]))])])]),_:1})]),_:1}),n("div",te,[e(a,{"html-type":"submit",type:"primary"},{default:s(()=>[x("\u4FDD\u5B58")]),_:1}),e(a,{onClick:o[4]||(o[4]=r=>{var B;return(B=v.value)==null?void 0:B.resetFields()}),style:{"margin-left":"10px"}},{default:s(()=>[x("\u91CD\u7F6E")]),_:1})])]),_:1},8,["model"])])]),_:1},8,["loading"])])}}});const ge=w(ae,[["__scopeId","data-v-8e91ee09"]]);export{ge as default};
