import{a as Ae,u as Ie,_ as Me}from"./index.47cdf61a.js";/* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css              *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css               */import{c as z,d as ze,r as Te,e as r,o as Ve,w as $e,aL as _,C as D,D as M,aI as e,u as i,aH as a,G as s,aO as h,aN as f,aK as Pe,aJ as Re,aE as Ue,E as Le,aF as Ne,c0 as Oe,n as K,aS as u,aR as Ye,aY as je,bb as Ke,c5 as Ge,bP as He,aW as Je,cb as We,bM as Xe,b_ as qe,bv as Qe,bw as Ze,bx as et,c4 as tt,aX as at,b$ as nt,c6 as ot,bO as st,b2 as ut,b3 as lt}from"./arco.9680cdc2.js";import{u as it}from"./loading.351b94a0.js";import{A as ct,u as rt,d as dt,g as pt}from"./AddForm.65d055c2.js";import{A as mt,g as _t,d as vt}from"./AddMenu.58067473.js";import{c as G}from"./cloneDeep.3df0f73e.js";import{a as H}from"./index.cb070d16.js";import{I as J}from"./Icon.9698649f.js";import{h as gt}from"./vue.780a5d54.js";import"./chart.1da8855c.js";/* empty css               *//* empty css                */const ht=z(()=>[{title:"\u6392\u5E8F",dataIndex:"weigh",width:80,align:"center"},{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"\u5B57\u5178\u540D\u79F0",dataIndex:"keyname",align:"center"},{title:"\u5B57\u5178\u9879\u503C",dataIndex:"keyvalue",align:"center"},{title:"\u5B57\u5178\u63CF\u8FF0",dataIndex:"des",align:"center"},{title:"\u72B6\u6001",dataIndex:"status",slotName:"status",align:"center"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createtime",slotName:"createtime",align:"center"},{title:"\u64CD\u4F5C",dataIndex:"operations",slotName:"operations",align:"center"}]),T=C=>(ut("data-v-b288c055"),C=C(),lt(),C),ft={class:"container"},bt={class:"flexbox"},yt={class:"menu"},Ft={class:"btn"},Ct=T(()=>s("span",{style:{"padding-left":"3px"}},"\u6DFB\u52A0",-1)),xt=T(()=>s("span",{style:{"padding-left":"3px"}},"\u4FEE\u6539",-1)),kt=T(()=>s("span",{style:{"padding-left":"3px"}},"\u5220\u9664",-1)),wt={class:"tablebox"},Dt={class:"titlebox"},Et={class:"text"},Bt={class:"icon"},St={class:"content"},At={class:"action-icon"},It={key:0,style:{"padding-left":"5px",color:"var(--color-neutral-4)"}},Mt=["src"],zt={name:"article"},Tt=ze({...zt,setup(C){const V=Ae(),$=gt(),{t:x}=Ie(),[W,{openModal:P}]=H(),[X,{openModal:q}]=H(),Q=z(()=>[{name:x("searchTable.size.mini"),value:"mini"},{name:x("searchTable.size.small"),value:"small"},{name:x("searchTable.size.medium"),value:"medium"},{name:x("searchTable.size.large"),value:"large"}]),d=Te({...{current:1,pageSize:10},showTotal:!0,showPageSize:!0}),{loading:Z,setLoading:E}=it(!0),B=r([]),v=r([]),k=r([]),ee=r([]),S=r("large"),R=()=>({trade_no:"",title:"",name:"",createdTime:[],status:""}),g=r(""),p=r(R()),m=async()=>{E(!0);try{const t=await pt({page:d.current,pageSize:d.pageSize,...p.value,tablename:g.value});B.value=t.items,d.current=t.page,d.total=t.total}catch{}finally{E(!1)}},c=r(),A=async()=>{v.value=await _t({}),v.value&&v.value.length>0&&(l.value=[v.value[0].id],c.value=v.value[0],g.value=v.value[0].tablename,K(()=>{m()}))},te=()=>{A()},l=r([]),ae=t=>{B.value=[],d.current=1,E(!0),l.value=[t.id],g.value=t.tablename,c.value=t,m()},U=t=>{var o,y,F;console.log((o=c.value)==null?void 0:o.data_from),t==2&&!c.value?u.error("\u672A\u9009\u62E9\u7F16\u8F91\u6570\u636E"):t==2&&((y=c.value)==null?void 0:y.data_from)=="common"&&((F=c.value)==null?void 0:F.businessID)!=V.$state.userId?u.error("\u60A8\u6CA1\u6709\u7F16\u8F91\u6743\u9650\uFF0C\u53EA\u80FD\u7F16\u8F91\u81EA\u5DF1\u6DFB\u52A0\u6570\u636E"):q(!0,{isUpdate:t==2,record:t==2?c:null})},ne=()=>{var t,o;!l.value||l.value.length==0?u.error("\u672A\u9009\u62E9\u5220\u9664\u6570\u636E"):((t=c.value)==null?void 0:t.data_from)=="common"||((o=c.value)==null?void 0:o.businessID)!=V.$state.userId?u.error("\u6570\u636E\u4E0D\u53EF\u7F16\u8F91"):Ye.warning({title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5185\u5BB9\u5417\uFF1F",content:"\u5220\u9664\u540E\u5185\u5BB9\u5C06\u65E0\u6CD5\u6062\u590D\u8BF7\u8C28\u614E\u64CD\u4F5C\uFF01",cancelText:"\u53D6\u6D88",okText:"\u5220\u9664",titleAlign:"start",hideCancel:!1,onOk:async()=>{u.loading({content:"\u5220\u9664\u4E2D",id:"upStatus",duration:0}),await vt({ids:l.value}),K(()=>{u.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus",duration:200}),A()})}})};Ve(()=>{A()});const L=()=>{m()},oe=()=>{p.value=R(),m()},se=(t,o)=>{S.value=t};$e(()=>ht.value,t=>{k.value=G(t),k.value.forEach((o,y)=>{o.checked=!0}),ee.value=G(k.value)},{deep:!0,immediate:!0});const ue=()=>{!l.value||l.value.length==0?u.error("\u672A\u9009\u62E9\u5B57\u5178\u6570\u636E"):P(!0,{isUpdate:!1,tablename:g.value,table_id:l.value[0],record:null})},le=async t=>{P(!0,{isUpdate:!0,tablename:g.value,table_id:l.value[0],record:t})},ie=async()=>{m()},ce=t=>{d.current=t,m()},re=t=>{d.pageSize=t,m()},de=async t=>{try{u.loading({content:"\u66F4\u65B0\u72B6\u6001\u4E2D",id:"upStatus"}),await rt({id:t.id,status:t.status,tablename:g.value})&&u.success({content:"\u66F4\u65B0\u72B6\u6001\u6210\u529F",id:"upStatus"})}catch{u.clear("top")}},pe=async t=>{try{u.loading({content:"\u5220\u9664\u4E2D",id:"upStatus"}),await dt({ids:[t.id],tablename:g.value})&&(m(),u.success({content:"\u5220\u9664\u6210\u529F",id:"upStatus"}))}catch{u.clear("top")}},me=z(()=>[{label:"\u5168\u90E8",value:""},{label:"\u6B63\u5E38",value:0},{label:"\u9690\u85CF",value:1}]);return(t,o)=>{const y=_("Breadcrumb"),F=_("icon-plus"),b=je,_e=_("icon-edit"),ve=_("icon-delete"),I=Ke,N=Ge,ge=_("icon-right"),O=He,he=Je,fe=We,be=Xe,ye=_("icon-search"),Y=qe,Fe=_("icon-refresh"),j=Qe,Ce=_("icon-line-height"),xe=Ze,ke=et,we=tt,De=at,Ee=nt,Be=ot,Se=st;return D(),M("div",ft,[e(y,{items:[i($).matched[0].meta.locale,i($).meta.locale]},null,8,["items"]),e(Se,{class:"general-card onelineCard",style:{height:"calc(100% - 50px)"}},{default:a(()=>[s("div",bt,[s("div",yt,[s("div",Ft,[e(I,null,{default:a(()=>[e(b,{type:"primary",onClick:o[0]||(o[0]=n=>U(1))},{default:a(()=>[e(F),Ct]),_:1}),e(b,{type:"primary",status:"warning",onClick:o[1]||(o[1]=n=>U(2))},{default:a(()=>[e(_e),xt]),_:1}),e(b,{type:"primary",status:"danger",onClick:ne},{default:a(()=>[e(ve),kt]),_:1})]),_:1})]),s("div",wt,[e(O,{data:v.value,"row-key":"id",onRowClick:ae,"selected-keys":l.value,scrollbar:!0,pagination:!1,bordered:{wrapper:!0,cell:!0},style:{"margin-top":"10px"}},{columns:a(()=>[e(N,{title:"",width:50,"data-index":"id"}),e(N,{title:"\u5B57\u5178\u540D\u79F0","data-index":"title"},{cell:a(({record:n})=>[s("div",Dt,[s("div",Et,h(n.title),1),s("div",Bt,[e(ge)])])]),_:1})]),_:1},8,["data","selected-keys"])])]),s("div",St,[e(we,{style:{"margin-bottom":"10px",padding:"0px 10px"}},{default:a(()=>[e(Y,{span:16},{default:a(()=>[e(I,null,{default:a(()=>[e(he,{style:{width:"160px"},modelValue:p.value.title,"onUpdate:modelValue":o[2]||(o[2]=n=>p.value.title=n),placeholder:"\u540D\u79F0","allow-clear":""},null,8,["modelValue"]),e(fe,{modelValue:p.value.createdTime,"onUpdate:modelValue":o[3]||(o[3]=n=>p.value.createdTime=n),style:{width:"200px"}},null,8,["modelValue"]),e(be,{modelValue:p.value.status,"onUpdate:modelValue":o[4]||(o[4]=n=>p.value.status=n),options:i(me),placeholder:"\u72B6\u6001",style:{width:"120px"}},null,8,["modelValue","options"]),e(b,{type:"primary",onClick:L},{icon:a(()=>[e(ye)]),default:a(()=>[f(" \u67E5\u8BE2 ")]),_:1}),e(b,{onClick:oe},{default:a(()=>[f(h(t.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1}),e(Y,{span:8,style:{"text-align":"right"}},{default:a(()=>[e(I,null,{default:a(()=>[e(b,{type:"primary",onClick:ue},{icon:a(()=>[e(F)]),default:a(()=>[f(" "+h(t.$t("searchTable.operation.create")),1)]),_:1}),e(j,{content:t.$t("searchTable.actions.refresh")},{default:a(()=>[s("div",{class:"action-icon",onClick:L},[e(Fe,{size:"18"})])]),_:1},8,["content"]),e(ke,{onSelect:se},{content:a(()=>[(D(!0),M(Pe,null,Re(i(Q),n=>(D(),Ue(xe,{key:n.value,value:n.value,class:Le({active:n.value===S.value})},{default:a(()=>[s("span",null,h(n.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(j,{content:t.$t("searchTable.actions.density")},{default:a(()=>[s("div",At,[e(Ce,{size:"18"})])]),_:1},8,["content"])]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{"row-key":"id",loading:i(Z),pagination:d,columns:k.value,data:B.value,bordered:{wrapper:!0,cell:!0},size:S.value,"default-expand-all-rows":!0,ref:"artable",onPageChange:ce,onPageSizeChange:re},{name:a(({record:n})=>[f(h(n.name),1),n.nickname?(D(),M("span",It,h(n.nickname),1)):Ne("",!0)]),image:a(({record:n})=>[s("img",{alt:"\u5C01\u9762",style:{height:"50px","border-radius":"5px"},src:n.image},null,8,Mt)]),createtime:a(({record:n})=>[f(h(i(Oe)(n.createtime*1e3).format("YYYY-MM-DD")),1)]),status:a(({record:n})=>[e(De,{type:"round",modelValue:n.status,"onUpdate:modelValue":w=>n.status=w,"checked-value":0,"unchecked-value":1,onChange:w=>de(n)},{checked:a(()=>[f(" \u5F00 ")]),unchecked:a(()=>[f(" \u5173 ")]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),operations:a(({record:n})=>[e(i(J),{icon:"svgfont-bianji1",class:"iconbtn",onClick:w=>le(n),size:18,color:"#0960bd"},null,8,["onClick"]),e(Ee,{direction:"vertical"}),e(Be,{content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417?",onOk:w=>pe(n)},{default:a(()=>[e(i(J),{icon:"svgfont-icon7",class:"iconbtn",size:18,color:"#ed6f6f"})]),_:2},1032,["onOk"])]),_:1},8,["loading","pagination","columns","data","size"])])])]),_:1}),e(ct,{onRegister:i(W),onSuccess:ie},null,8,["onRegister"]),e(mt,{onRegister:i(X),onSuccess:te},null,8,["onRegister"])])}}});const _a=Me(Tt,[["__scopeId","data-v-b288c055"]]);export{_a as default};
