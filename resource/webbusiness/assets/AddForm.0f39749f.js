import{u as h,p as w,_ as k}from"./index.d9e4049f.js";/* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as I,e as s,c as M,u as b,aS as _,aL as y,C as S,aE as A,aH as r,aI as t,bU as C,aW as L,b7 as U,cc as $,aV as P,bS as R,bc as T}from"./arco.9680cdc2.js";import{B as N,u as O}from"./index.67381c52.js";import{u as H}from"./loading.351b94a0.js";import{g as q,s as W}from"./dept.f4bf77fb.js";import{I as Y}from"./IconPicker.d9159e88.js";import{I as j}from"./Icon.fce6e5e1.js";import"./chart.1da8855c.js";import"./vue.72f6b675.js";/* empty css                *//* empty css                *//* empty css                */const z=I({name:"AddForm",components:{BasicModal:N,IconPicker:Y,Icon:j},emits:["success"],setup(e,{emit:a}){const{t:B}=h(),n=s(!1),m=s([]),i=s(),u=s({id:0,name:"",pid:0,weigh:1,remark:""}),p=s(""),[c,{setModalProps:f,closeModal:g}]=O(async l=>{var V;(V=i.value)==null||V.resetFields(),f({confirmLoading:!1});const d=await q(),v=[{id:0,name:"\u4E00\u7EA7\u90E8\u95E8",pid:0}];d?m.value=v.concat(d):m.value=v,n.value=!!(l!=null&&l.isUpdate),b(n)&&(p.value=l.record.component,u.value=w(l.record))}),E=M(()=>b(n)?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),{loading:o,setLoading:F}=H();return{registerModal:c,getTitle:E,handleSubmit:async()=>{var l;try{await((l=i.value)==null?void 0:l.validate())||(F(!0),_.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus"}),await W(b(u)),_.success({content:"\u66F4\u65B0\u6210\u529F",id:"upStatus"}),g(),a("success"),F(!1))}catch{F(!1),_.clear("top")}},formRef:i,loading:o,formData:u,parntList:m,t:B,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}]}}});function G(e,a,B,n,m,i){const D=L,u=U,p=$,c=P,f=R,g=T,E=y("BasicModal");return S(),A(E,C(e.$attrs,{onRegister:e.registerModal,loading:e.loading,helpMessage:"\u7F16\u8F91\u548C\u4FEE\u6539\u90E8\u95E8",width:"600px",minHeight:280,title:e.getTitle,onOk:e.handleSubmit}),{default:r(()=>[t(g,{ref:"formRef",model:e.formData,"auto-label-width":"",style:{padding:"10px 20px"}},{default:r(()=>[t(u,{field:"name",label:"\u90E8\u95E8\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:r(()=>[t(D,{modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.name=o),placeholder:"\u8BF7\u586B\u5199\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(u,{label:"\u4E0A\u7EA7\u90E8\u95E8",field:"pid",style:{"margin-bottom":"15px"}},{default:r(()=>[t(p,{placeholder:"\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",data:e.parntList,fieldNames:{key:"id",title:"name",children:"children"},modelValue:e.formData.pid,"onUpdate:modelValue":a[1]||(a[1]=o=>e.formData.pid=o)},null,8,["data","modelValue"])]),_:1}),t(u,{label:"\u6392\u5E8F",field:"weigh",style:{"margin-bottom":"15px"}},{default:r(()=>[t(c,{modelValue:e.formData.weigh,"onUpdate:modelValue":a[2]||(a[2]=o=>e.formData.weigh=o),placeholder:"\u8BF7\u586B\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),t(u,{field:"remark",label:"\u5907\u6CE8","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:r(()=>[t(f,{modelValue:e.formData.remark,"onUpdate:modelValue":a[3]||(a[3]=o=>e.formData.remark=o),placeholder:"\u8BF7\u586B\u5199\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const fe=k(z,[["render",G]]);export{fe as default};
