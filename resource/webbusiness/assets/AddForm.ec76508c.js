import{n as B,u as P,p as R,_ as q}from"./index.d9e4049f.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css                */import{d as L,e as V,c as $,u as b,aS as v,aL as w,C,aE as O,aH as t,aI as a,G as f,D as U,bU as T,E as H,aW as j,b7 as z,b_ as N,bS as W,c9 as G,c4 as Y,bc as J}from"./arco.9680cdc2.js";import{B as K,u as Q}from"./index.67381c52.js";import{u as X}from"./loading.351b94a0.js";import{I as Z}from"./IconPicker.d9159e88.js";import{I as x}from"./Icon.fce6e5e1.js";import{u as ee}from"./common.766f2668.js";function Me(e){return B.get({url:"/wxsys/wxuser/get_list",params:e},{errorMessageMode:"none"})}function ae(e){return B.post({url:"/wxsys/wxuser/save",params:e},{errorMessageMode:"message"})}function ke(e){return B.post({url:"/wxsys/wxuser/upStatus",params:e},{errorMessageMode:"message"})}function Ae(e){return B.delete({url:"/wxsys/wxuser/del",params:e},{errorMessageMode:"message"})}const oe=L({name:"AddBook",components:{BasicModal:K,IconPicker:Z,Icon:x},emits:["success"],setup(e,{emit:l}){const{t:E}=P(),m=V(!1),c=V(),_={id:0,name:"",nickname:"",dept_id:0,roleid:[],username:"",password:"",avatar:"",tel:"",mobile:"",email:"",address:"",city:"",remark:"",company:""},u=V(_),[s,{setModalProps:r,closeModal:F}]=Q(async o=>{var d;(d=c.value)==null||d.resetFields(),r({confirmLoading:!1}),m.value=!!(o!=null&&o.isUpdate),b(m)?u.value=R(o.record):u.value=_}),D=$(()=>b(m)?"\u7F16\u8F91\u7BA1\u7406\u8D26\u53F7":"\u65B0\u589E\u7BA1\u7406\u8D26\u53F7"),{loading:y,setLoading:i}=X();return{registerModal:s,getTitle:D,handleSubmit:async()=>{var o;try{await((o=c.value)==null?void 0:o.validate())||(i(!0),!b(m)&&u.value.password==""&&(u.value.password="123456"),v.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus"}),await ae(b(u)),v.success({content:"\u66F4\u65B0\u6210\u529F",id:"upStatus"}),F(),l("success"),i(!1))}catch{i(!1),v.clear("top")}},formRef:c,loading:y,formData:u,t:E,OYoptions:[{label:"\u5426",value:0},{label:"\u662F",value:1}],onChange:o=>{console.log("fileList",o)},customRequest:o=>{const d=new AbortController;return async function(){const{onProgress:h,onError:I,onSuccess:fe,fileItem:g}=o;h(20);const S=n=>{let p;n.total>0&&(p=n.loaded/n.total*100),h(parseInt(String(p),10),n)};try{const n=(g==null?void 0:g.name)||"",p=await ee({name:"file",file:g.file,filename:n,data:{cid:0}},S);p&&(u.value.avatar=p.url)}catch(n){I(n)}}(),{abort(){d.abort()}}}}}}),te={class:H("arco-upload-list-item")},le={key:0,class:"arco-upload-list-picture custom-upload-avatar"},ue=["src"],se={class:"arco-upload-list-picture-mask"},re={key:1,class:"arco-upload-picture-card"},ne={class:"arco-upload-picture-card-text"},de=f("div",{style:{"margin-top":"10px","font-weight":"600"}},"\u4E0A\u4F20\u5934\u50CF",-1);function me(e,l,E,m,c,_){const u=j,s=z,r=N,F=W,D=w("IconEdit"),y=w("IconPlus"),i=G,M=Y,k=J,A=w("BasicModal");return C(),O(A,T(e.$attrs,{onRegister:e.registerModal,loading:e.loading,helpMessage:"\u7F16\u8F91\u548C\u4FEE\u6539\u83DC\u5355",width:"800px",minHeight:420,title:e.getTitle,onOk:e.handleSubmit}),{default:t(()=>[a(k,{ref:"formRef",model:e.formData,"auto-label-width":""},{default:t(()=>[a(M,{gutter:16},{default:t(()=>[a(r,{span:12},{default:t(()=>[a(s,{field:"name",label:"\u59D3\u540D","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u59D3\u540D"}],style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.formData.name=o),placeholder:"\u8BF7\u586B\u59D3\u540D"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"nickname",label:"\u6635\u79F0","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.nickname,"onUpdate:modelValue":l[1]||(l[1]=o=>e.formData.nickname=o),placeholder:"\u8BF7\u586B\u5199\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"mobile",label:"\u624B\u673A\u53F7\u7801",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.mobile,"onUpdate:modelValue":l[2]||(l[2]=o=>e.formData.mobile=o),placeholder:"\u8BF7\u586B\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"tel",label:"\u5EA7\u673A",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.tel,"onUpdate:modelValue":l[3]||(l[3]=o=>e.formData.tel=o),placeholder:"\u8BF7\u586B\u5EA7\u673A"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"email",label:"\u90AE\u7BB1",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.email,"onUpdate:modelValue":l[4]||(l[4]=o=>e.formData.email=o),placeholder:"\u8BF7\u586B\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"address",label:"\u5730\u5740",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.address,"onUpdate:modelValue":l[5]||(l[5]=o=>e.formData.address=o),placeholder:"\u8BF7\u586B\u5730\u5740"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"city",label:"\u57CE\u5E02",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.city,"onUpdate:modelValue":l[6]||(l[6]=o=>e.formData.city=o),placeholder:"\u8BF7\u586B\u57CE\u5E02"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"company",label:"\u516C\u53F8",style:{"margin-bottom":"15px"}},{default:t(()=>[a(u,{modelValue:e.formData.company,"onUpdate:modelValue":l[7]||(l[7]=o=>e.formData.company=o),placeholder:"\u8BF7\u586B\u516C\u53F8"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"remark",label:"\u5907\u6CE8",style:{"margin-bottom":"15px"}},{default:t(()=>[a(F,{modelValue:e.formData.remark,"onUpdate:modelValue":l[8]||(l[8]=o=>e.formData.remark=o),placeholder:"\u8BF7\u586B\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1}),a(r,{span:12},{default:t(()=>[a(s,{field:"avatar",label:"\u5934\u50CF",style:{"margin-bottom":"15px"}},{default:t(()=>[a(i,{action:"/","show-file-list":!1,onChange:e.onChange,"custom-request":e.customRequest},{"upload-button":t(()=>[f("div",te,[e.formData.avatar?(C(),U("div",le,[f("img",{src:e.formData.avatar},null,8,ue),f("div",se,[a(D)])])):(C(),U("div",re,[f("div",ne,[a(y),de])]))])]),_:1},8,["onChange","custom-request"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const ie=q(oe,[["render",me]]),he=Object.freeze(Object.defineProperty({__proto__:null,default:ie},Symbol.toStringTag,{value:"Module"}));export{ie as A,he as a,Ae as d,Me as g,ke as u};
