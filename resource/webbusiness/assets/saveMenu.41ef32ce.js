import{p as F,_ as M}from"./index.47cdf61a.js";/* empty css               *//* empty css               *//* empty css                */import{d as v,e as m,c as C,u as _,aS as B,aL as I,C as h,aE as y,aH as d,aI as n,bU as S,aW as V,b7 as w,bS as k,bc as E}from"./arco.9680cdc2.js";import{B as L,u as U}from"./index.cb070d16.js";import{u as $}from"./loading.351b94a0.js";import{s as O}from"./wxmenu.18469495.js";import{I as R}from"./IconPicker.7350328a.js";import{I as P}from"./Icon.9698649f.js";import"./chart.1da8855c.js";import"./vue.780a5d54.js";/* empty css                *//* empty css                *//* empty css               *//* empty css                */const T=v({name:"AddForm",components:{BasicModal:L,IconPicker:R,Icon:P},emits:["success"],setup(e,{emit:t}){const r=m(!1),D=m([]),l=m(),s=m({name:"",des:"",menu:[]}),[p,{setModalProps:u,closeModal:c}]=U(async a=>{var i;(i=l.value)==null||i.resetFields(),u({confirmLoading:!1}),r.value=!!(a!=null&&a.isUpdate),_(r)&&(s.value=Object.assign({},s.value,F(a.record)))}),f=C(()=>_(r)?"\u7F16\u8F91":"\u65B0\u589E"),{loading:g,setLoading:o}=$();return{registerModal:p,getTitle:f,handleSubmit:async()=>{var a;try{if(!await((a=l.value)==null?void 0:a.validate())){o(!0),B.loading({content:"\u66F4\u65B0\u4E2D",id:"upStatus"});const b=await O(_(s));console.log(b),B.success({content:b.message,id:"upStatus"}),c(),t("success"),o(!1)}}catch{o(!1),B.clear("top")}},formRef:l,loading:g,formData:s,parntList:D}}});function H(e,t,r,D,l,s){const p=V,u=w,c=k,f=E,g=I("BasicModal");return h(),y(g,S(e.$attrs,{onRegister:e.registerModal,loading:e.loading,width:"600px",minHeight:280,title:e.getTitle,onOk:e.handleSubmit}),{default:d(()=>[n(f,{ref:"formRef",model:e.formData,"auto-label-width":"",style:{padding:"10px 20px"}},{default:d(()=>[n(u,{field:"name",label:"\u83DC\u5355\u540D\u79F0","validate-trigger":"input",rules:[{required:!0,message:"\u8BF7\u586B\u83DC\u5355\u540D\u79F0"}],style:{"margin-bottom":"15px"}},{default:d(()=>[n(p,{modelValue:e.formData.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e.formData.name=o),placeholder:"\u8BF7\u586B\u5199\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),n(u,{field:"des",label:"\u5907\u6CE8","validate-trigger":"input",style:{"margin-bottom":"15px"}},{default:d(()=>[n(c,{modelValue:e.formData.des,"onUpdate:modelValue":t[1]||(t[1]=o=>e.formData.des=o),placeholder:"\u8BF7\u586B\u5199\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},16,["onRegister","loading","title","onOk"])}const te=M(T,[["render",H]]);export{te as default};
