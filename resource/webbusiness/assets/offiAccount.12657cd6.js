import{_ as $}from"./index.47cdf61a.js";/* empty css                *//* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                */import{d as P,e as B,aL as C,C as S,D as h,aI as u,aH as t,G as r,aN as F,aO as R,u as z,aS as E,aW as N,b7 as Z,bS as O,ba as W,aY as G,c9 as H,bc as Y,br as j,b2 as J,b3 as Q}from"./arco.9680cdc2.js";import{g as X,s as ee}from"./wxsetting.7f7c5199.js";import{u as ue}from"./loading.351b94a0.js";import{u as oe}from"./common.d0048664.js";import{u as te}from"./vue.780a5d54.js";import"./chart.1da8855c.js";function V(d,A){for(var D="",g=A?Math.round(Math.random()*(A-d))+d:d,_=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],f=0;f<g;f++){var v=Math.round(Math.random()*(_.length-1));D+=_[v]}return D}const ae=d=>(J("data-v-d9f09ed0"),d=d(),Q(),d),le={class:"formbox"},ne={class:"subbox"},se={style:{"padding-left":"10px"}},re={class:"upimagebox"},de={class:"imagebtn"},ie={key:0,class:"upload-show-picture"},ce=["src"],pe={class:"upload-show-picture-mask"},me={key:1,class:"upload-picture-card"},_e={class:"upload-picture-card-text"},fe=ae(()=>r("div",{style:{"margin-top":"10px","font-weight":"600"}},"\u4E0A\u4F20\u56FE\u7247",-1)),Fe={class:"sumbtn"},Ae=P({__name:"offiAccount",setup(d){const{copy:A}=te(),{loading:D,setLoading:g}=ue(),_=(window==null?void 0:window.globalConfig.Main_url)+"/wxoffi/service/getPost_api?id=",f=B(),v={id:0,name:"",AppID:"",AppSecret:"",des:"",qrcode:"",Token:"",EncodingAESKey:""},o=B(v),b=B(0);(async()=>{g(!0);try{const l=await X({});l?(o.value=l,b.value=l.businessID):o.value=v}catch{}finally{g(!1)}})();const k=async({values:l,errors:e})=>{if(console.log(`
errors:`,e),!e)try{E.loading({content:"\u4FDD\u5B58\u4E2D",id:"upStatus"}),l.id=o.value.id,await ee(l),E.success({content:"\u4FDD\u5B58\u6210\u529F",id:"upStatus"})}catch{E.clear("top")}},w=l=>{const e=new AbortController;return async function(){const{onProgress:n,onError:y,onSuccess:x,fileItem:p}=l;n(20);const m=s=>{let c;s.total>0&&(c=s.loaded/s.total*100),n(parseInt(String(c),10),s)};try{const s=(p==null?void 0:p.name)||"",c=await oe({name:"file",file:p.file,filename:s,data:{cid:0}},m);c&&(o.value.qrcode=c.url)}catch(s){y(s)}}(),{abort(){e.abort()}}},q=async l=>{await A(l),E.success({content:"\u590D\u5236\u6210\u529F",id:"copysuccess"})},T=()=>{o.value.Token=V(3,32)},U=()=>{o.value.EncodingAESKey=V(43,43)};return(l,e)=>{const i=N,n=Z,y=O,x=C("icon-copy"),p=W,m=G,s=C("IconEdit"),c=C("IconPlus"),K=H,L=Y,M=j;return S(),h("div",le,[u(M,{loading:z(D),tip:"\u52A0\u8F7D\u4E2D"},{default:t(()=>[r("div",ne,[u(L,{ref_key:"formRef",ref:f,model:o.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18},onSubmit:k},{default:t(()=>[u(n,{field:"name",label:"\u516C\u4F17\u53F7\u540D\u79F0",rules:[{required:!0,message:"\u516C\u4F17\u53F7\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"},{match:/^[a-zA-Z0-9\u4e00-\u9fa5]{1,20}$/,message:"\u8F93\u5165\u6C49\u5B57\u3001\u5B57\u6BCD\u6216\u6570\u5B57\uFF0C\u6700\u591A20\u5B57\u7B26"}]},{default:t(()=>[u(i,{modelValue:o.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),placeholder:"\u586B\u5199\u516C\u4F17\u53F7\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u(n,{field:"AppID",label:"\u5F00\u53D1\u8005ID",rules:[{required:!0,message:"\u5F00\u53D1\u8005ID\u4E0D\u80FD\u4E3A\u7A7A"},{match:/^[0-9A-Za-z]{6,38}$/,message:"\u8F93\u5165\u5B57\u6BCD\u6216\u6570\u5B57"}]},{default:t(()=>[u(i,{modelValue:o.value.AppID,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.AppID=a),placeholder:"\u586B\u5199\u5F00\u53D1\u8005ID\uFF08AppID\uFF09"},null,8,["modelValue"])]),_:1}),u(n,{field:"AppSecret",label:"\u5F00\u53D1\u8005\u79D8\u94A5",rules:[{required:!0,message:"\u5F00\u53D1\u8005\u79D8\u94A5\u4E0D\u80FD\u4E3A\u7A7A"},{match:/^[0-9A-Za-z]{6,50}$/,message:"\u8F93\u5165\u5B57\u6BCD\u6216\u6570\u5B57"}]},{default:t(()=>[u(i,{modelValue:o.value.AppSecret,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.AppSecret=a),placeholder:"\u586B\u5199\u5F00\u53D1\u8005\u79D8\u94A5\uFF08AppSecret\uFF09"},null,8,["modelValue"])]),_:1}),u(n,{field:"des",label:"\u5907\u6CE8"},{default:t(()=>[u(y,{modelValue:o.value.des,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.des=a),placeholder:"\u586B\u5199\u5907\u6CE8\uFF08\u9009\u586B\uFF09"},null,8,["modelValue"])]),_:1}),u(n,{label:"URL",style:{"margin-bottom":"1px"}},{default:t(()=>[u(p,{onClick:e[4]||(e[4]=a=>q(_+b.value))},{default:t(()=>[F(R(_+b.value)+" ",1),r("span",se,[u(x)])]),_:1})]),_:1}),u(n,{field:"Token",label:"\u63A5\u53E3Token"},{default:t(()=>[u(i,{modelValue:o.value.Token,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.Token=a),placeholder:"\u5FC5\u987B\u4E3A\u82F1\u6587\u6216\u6570\u5B57\uFF0C\u957F\u5EA6\u4E3A3-32\u5B57\u7B26","max-length":32,"show-word-limit":""},null,8,["modelValue"]),u(m,{onClick:e[6]||(e[6]=a=>T()),style:{marginLeft:"10px"}},{default:t(()=>[F("\u968F\u673A\u751F\u6210")]),_:1})]),_:1}),u(n,{field:"EncodingAESKey",label:"EncodingAESKey"},{default:t(()=>[u(i,{modelValue:o.value.EncodingAESKey,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.EncodingAESKey=a),placeholder:"\u6D88\u606F\u52A0\u5BC6\u5BC6\u94A5\u753143\u4F4D\u5B57\u7B26\u7EC4\u6210\uFF0C\u53EF\u968F\u673A\u4FEE\u6539\uFF0C\u5B57\u7B26\u8303\u56F4\u4E3AA-Z\uFF0Ca-z\uFF0C0-9","max-length":43,"show-word-limit":""},null,8,["modelValue"]),u(m,{onClick:e[8]||(e[8]=a=>U()),style:{marginLeft:"10px"}},{default:t(()=>[F("\u968F\u673A\u751F\u6210")]),_:1})]),_:1}),u(n,{field:"image",label:"\u4E8C\u7EF4\u7801"},{default:t(()=>[u(K,{accept:"image/*","show-file-list":!1,"custom-request":w},{"upload-button":t(()=>[r("div",re,[r("div",de,[o.value.qrcode?(S(),h("div",ie,[r("img",{src:o.value.qrcode},null,8,ce),r("div",pe,[u(s)])])):(S(),h("div",me,[r("div",_e,[u(c),fe])]))])])]),_:1})]),_:1}),r("div",Fe,[u(m,{"html-type":"submit",type:"primary"},{default:t(()=>[F("\u4FDD\u5B58")]),_:1}),u(m,{onClick:e[9]||(e[9]=a=>{var I;return(I=f.value)==null?void 0:I.resetFields()}),style:{"margin-left":"10px"}},{default:t(()=>[F("\u91CD\u7F6E")]),_:1})])]),_:1},8,["model"])])]),_:1},8,["loading"])])}}});const Te=$(Ae,[["__scopeId","data-v-d9f09ed0"]]);export{Te as default};
